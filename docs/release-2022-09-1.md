# RDKit 2022.09.1 がリリースされました
2022年10月21日に RDKit 2022.09.1 がリリースされました。この記事では新バージョンのリリースノートの抄訳と新機能のコード例を紹介します。より詳細な情報を知りたい方はリリースノートの原文 ([2022_09_1 (Q3 2022) Release](https://github.com/rdkit/rdkit/releases/tag/Release_2022_09_1)) をご確認ください。

## リリースノート抄訳
<!-- ## Highlights -->
### ハイライト
<!-- - The new RegistrationHash module provides one of the last pieces required to build a registration system with the RDKit. -->
- RDKitで分子登録システムを構築するために必要な`RegistrationHash`モジュールが追加されました。
<!-- This release includes an initial version of a C++ implementation of the xyz2mol algorithm for assigning bonds and bond orders based on atomic positions. This work was done as part of the 2022 Google Summer of Code. -->
- 原子の位置から結合と結合次数を決めるxyz2molアルゴリズムのC++実装の初期バージョンが追加されました。これは2022年のGoogle Summer of Codeの成果です。
<!-- A collection of new functionality has been added to minimallib and is now accessible from JavaScript and other programming languages. -->
- minimallibに複数の新機能が追加され、JavaScript等の言語から使用可能になりました。

<!-- ## Backwards incompatible changes -->
### 後方互換性のない変更
<!-- Changes to the way atomic chirality is used in the canonicalization algorithm mean that canonical atom ranking and canonical SMILES generated with this RDKit version can be different from those generated with previous versions -->
- カノニカル化アルゴリズムにおける原子のキラリティーの扱いが変更されため、このRDKitバージョンで生成されるカノニカル原子順位やカノニカルSMILESは以前のバージョンで生成されたものと異なる可能性があります。
<!-- - `GetBestRMS() and CalcRMS()` by default now treat terminal conjugated functional groups like carboxylate and nitro symmetrically. For example, the group `C(=[O:1])[O-:2]` can match in either orientation. The SMARTS pattern which is used to recognize affected groups is: 
  `[{atomP};$([{atomP}]-[*]=[{atomP}]),$([{atomP}]=[*]-[{atomP}])]~[*]` where
  `{atomP}` is `O,N;D1`. The previous behavior can be restored using by setting
  the `symmetrizeConjugatedTerminalGroups` argument to false when calling
  `GetBestRMS() and CalcRMS()` -->
- `GetBestRMS()` と `CalcRMS()` は終端のカルボキシル基やニトロ基などの共役官能基を対称に取り扱うのがデフォルトになりました。例えば `C(=[O:1])[O-:2]` はどちらの方向にもマッチします。この変更で影響される官能基を表すSMARTSパターンは`[{atomP};$([{atomP}]-[*]=[{atomP}]),$([{atomP}]=[*]-[{atomP}])]~[*]` です（`{atomP}` は `O,N;D1`）。以前の挙動を再現するには`GetBestRMS()` と `CalcRMS()`を呼び出す際の引数で`symmetrizeConjugatedTerminalGroups`をfalseに設定してください。
<!-- - The following `#defines` are no longer provided in/used by the C++ code or `RDConfig.h`:
  - `BUILD_COORDGEN_SUPPORT`: use `RDK_BUILD_COORDGEN_SUPPORT` instead
  - `RDK_THREADSAFE_SSS`: use `RDK_BUILD_THREADSAFE_SSS` instead
  - `USE_BUILTIN_POPCOUNT`: use `RDK_OPTIMIZE_POPCNT` instead-->
- 以下の定数はC++コードや`RDConfig.h`で今後提供・使用されません
  - `BUILD_COORDGEN_SUPPORT`: 代わりに `RDK_BUILD_COORDGEN_SUPPORT` を使用してください
  - `RDK_THREADSAFE_SSS`: 代わりに `RDK_BUILD_THREADSAFE_SSS` を使用してください
  - `USE_BUILTIN_POPCOUNT`: 代わりに `RDK_OPTIMIZE_POPCNT` を使用してください
<!--- The Python function `Chem.GetSSSR()` now returns the SSSR rings found instead of just returning the count of rings. This is consistent with `Chem.GetSymmSSSR()` and more useful.-->
- Python関数 `Chem.GetSSSR()` は環の個数ではなく見つかったSSSR (訳注: smallest set of smallest rings) 環を返すようになりました。この挙動は `Chem.GetSymmSSSR()` と一貫性があり、より便利です。
<!-- - The SMILES parser will ignore the value of `SmilesParserParams.useLegacyStereo` unless it is set to `false`. See the deprecation note about `useLegacyStereo` below for more information.-->
- SMILES パーサーが `SmilesParserParams.useLegacyStereo` の値を無視するようになりました（ `false`に設定されている場合を除く）。詳細は `useLegacyStereo` の非推奨に関する下の記述をご覧ください。
<!-- - The CFFI function `set_2d_coords_aligned()` now takes an additional `char **match_json` parameter; if `match_json` is not not `NULL`, `*match_json` will point to a JSON string containing the atoms and bonds which are part of the match.  It is up to the user to free this string.-->
- CFFI関数 `set_2d_coords_aligned()` が追加のパラメータ `char **match_json` を取るようになりました。`match_json` が `NULL` ではない場合、`*match_json` はマッチ部分の原子と結合を含むJSON文字列を指します。この文字列のメモリを解放するのはユーザーの責任です。
<!-- - The aliphatic imine rule used in tautomer enumeration has been changed to more
  closely match the definition in the original paper.-->
- 互変異性体の列挙に用いる脂肪族イミンに関する規則がより原論文の定義に近いものになりました。

<!-- ## Bug Fixes: & ## Cleanup work: & New Features and Enhancements: -->
### バグ修正・クリーンアップ・新機能及び改善
<!-- 量が多すぎるため、各コミットの詳細を知りたい人は原文を読めるだろうという判断により省略 -->
（訳注: 省略します。興味のある方は[原文](https://github.com/rdkit/rdkit/releases/tag/Release_2022_09_1)をご確認ください。）

<!-- ## Code removed in this release: -->
### このリリースで削除されたコード
<!-- - The C++ class `RDLog::BlockLogs` has been removed. Please use the class `RDLog::LogStateSetter`. The Python class rdBase.BlockLogs() is still available and supported. -->
- C++ クラス `RDLog::BlockLogs` は削除されました。クラス `RDLog::LogStateSetter` を使用してください。 Python クラス `rdBase.BlockLogs()` は現在もサポートされており使用可能です。
<!-- - Python function `rdkit.Chem.WrapLogs()` has been removed. Please use `rdkit.rdBase.LogToPythonStderr()`. `rdkit.rdBase.WrapLogs()` also exists, but unless you need the old teeing behavior, prefer the former.-->
- Python 関数 `rdkit.Chem.WrapLogs()` は削除されました。`rdkit.rdBase.LogToPythonStderr()` を使用してください。`rdkit.rdBase.WrapLogs()` も存在しますが、標準エラー出力へ同時に出力する古い挙動が必要な場合を除いて前者が好ましいです。
<!-- - Python function `rdkit.Chem.LogWarningMsg()` has been removed. Please use `rdkit.rdBase.LogWarningMsg()`.-->
- Python 関数 `rdkit.Chem.LogWarningMsg()` は削除されました。`rdkit.rdBase.LogWarningMsg()` を使用してください。
<!-- - Python function `rdkit.Chem.LogErrorMsg()` has been removed. Please use `rdkit.rdBase.LogErrorMsg()`.-->
- Python 関数 `rdkit.Chem.LogErrorMsg()` は削除されました。`rdkit.rdBase.LogErrorMsg()` を使用してください。

### 非推奨となったコード（将来のリリースで削除予定）
<!-- - The `SmilesParserParams` option `useLegacyStereo` is deprecated and will be removed in the 2023.03 release. Please use `SetUseLegacyStereoPerception()` instead. In the meantime the SMILES parser will use only use the value of `SmilesParserParams.useLegacyStereo` if it is set to `false`, otherwise the value of the global `useLegacyStereoPerception` parameter will control the behavior of the SMILES parser.-->
- `SmilesParserParams` の `useLegacyStereo` オプションは非推奨となり、2023.03 のリリースで削除されます。代わりに `SetUseLegacyStereoPerception()` を使用してください。次のリリースまでの間、SMILES パーサーが `SmilesParserParams.useLegacyStereo` の値を使用するのは その値が `false` に設定されている場合だけです。それ以外の場合はグローバルパラメータ `useLegacyStereoPerception` の値が SMILES パーサーの挙動を指定します。
<!-- - The following JS methods: -->
- 以下のJavaScriptメソッド
  * generate_aligned_coords()
  * get_morgan_fp()
  * get_morgan_fp_as_uint8array()
  * get_pattern_fp()
  * get_pattern_fp_as_uint8array()
  <!-- which used to take several individual parameters now take a single JSON string parameter.  The overloads taking several individual parameters are now deprecated and will be removed in a future release. -->
  は複数の個別パラメータを取っていましたが、今後は一つのJSON文字列パラメータを取るようになります。複数の個別パラメータによるオーバーロードは非推奨となり、将来のリリースで削除される予定です。
<!--- The `PrintAsBase64PNGString` function in `PandasTools` is deprecated and replaced by `PrintAsImageString`, which has a more appropriate name given it actually supports both PNG and SVG images. -->
- `PandasTools` 内の `PrintAsBase64PNGString` 関数は非推奨となり、PNGとSVGの両方をサポートすることを示すより適切な名前である `PrintAsImageString` に置き換えられました。

## 新機能のコード例
作業中
